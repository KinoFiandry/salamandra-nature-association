"use client";

import React, { createContext, useContext, useState, useEffect } from 'react';

type Language = 'en' | 'fr';

interface I18nContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const translations: Record<Language, Record<string, string>> = {
    en: {
      'nav.home': 'Home',
      'nav.about': 'About Us',
      'nav.projects': 'Projects',
      'nav.news': 'News',
      'nav.media': 'Media',
      'nav.events': 'Events',
      'nav.partners': 'Partners',
        'nav.contact': 'Contact',
        'nav.admin': 'Admin',
        'nav.donate': 'Donate Now',
      'hero.title': 'Protecting Madagascar\'s',
      'hero.titleAccent': 'Land Turtles',
      'hero.subtitle': 'Join us in our mission to conserve endangered land turtle species and preserve their dry forest habitats in southern Madagascar.',
      'hero.cta': 'Support Our Cause',
      'hero.learnMore': 'Learn More',
      'impact.title': 'Our Impact',
      'impact.years': 'Years of Conservation',
      'impact.turtles': 'Turtles Protected',
      'impact.communities': 'Local Communities',
      'impact.hectares': 'Hectares Protected',
      'programs.title': 'Our Programs',
      'programs.habitat.title': 'Habitat Protection',
      'programs.habitat.desc': 'Preserving critical dry forests and scrublands essential for land turtle survival in southern Madagascar.',
      'programs.edu.title': 'Community Education',
      'programs.edu.desc': 'Engaging local communities through awareness programs and sustainable livelihood alternatives.',
      'programs.research.title': 'Research & Monitoring',
      'programs.research.desc': 'Conducting scientific research to better understand and protect endangered land turtle populations.',
      'cta.title': 'Every Donation Makes a Difference',
      'cta.desc': 'Your support helps us protect endangered land turtles, preserve their habitats, and educate communities. Join us in making a lasting impact.',
      'cta.button': 'Make a Donation Today',
        'footer.desc': 'Salamandra Nature - Dedicated to protecting Madagascar\'s endangered land tortoises since 2004.',
      'footer.links': 'Quick Links',
      'footer.contact': 'Contact',
      'footer.follow': 'Follow Us',
        'contact.title': 'Contact Us',
        'contact.subtitle': 'Have questions or want to volunteer? Send us a message.',
        'contact.name': 'Full Name',
        'contact.email': 'Email Address',
        'contact.subject': 'Subject',
        'contact.message': 'Message',
        'contact.send': 'Send Message',
        'contact.sending': 'Sending...',
        'contact.success': 'Message sent successfully!',
        'contact.error': 'Failed to send message. Please try again.',
        'contact.send_another': 'Send Another Message',
        'contact.address_label': 'Address',
        'contact.email_label': 'Email',
        'contact.phone_label': 'Phone',
        'about.title': 'About Us',
      'about.presentation': 'Overview',
      'about.actions': 'Our Actions',
      'news.title': 'Latest News',
      'news.readMore': 'Read More',
      'news.noNews': 'No news articles yet. Check back soon!',
      'projects.title': 'Our Conservation Projects',
      'media.title': 'Photo & Video Gallery',
      'events.title': 'Events Calendar',
      'events.search': 'Search Events',
      'partners.title': 'Our Partners',
      'admin.dashboard': 'Admin Dashboard',
    'admin.members': 'Members',
    'admin.members.manage': 'Manage Group Members',
    'admin.members.add': 'Add Member',
    'admin.members.edit': 'Edit Member',
    'admin.members.name': 'Full Name',
    'admin.members.roleEn': 'Role (EN)',
    'admin.members.roleFr': 'Role (FR)',
    'admin.members.bioEn': 'Short Bio (EN)',
    'admin.members.bioFr': 'Short Bio (FR)',
    'admin.members.photo': 'Photo',
    'admin.members.order': 'Display Order',
    'admin.members.save': 'Save Member',
    'admin.members.cancel': 'Cancel',
    'admin.members.delete': 'Delete',
    'admin.members.deleteConfirm': 'Are you sure you want to delete this member?',
    'admin.members.empty': 'No group members yet. Add your first member!',
      'admin.members.uploadPhoto': 'Click to upload photo',
    'admin.members.photoUrl': 'Photo URL',
    'admin.members.photoUrlHint': 'Paste a URL instead of uploading. Upload takes priority if both provided.',
    'admin.subtitle': 'Manage NGO Website Content',
    'admin.totalVisitors': 'Total Visitors',
    'admin.logout': 'Logout',
    'admin.goToWebsite': 'Go to Website',
    'admin.tabs.events': 'Events',
    'admin.tabs.videos': 'Videos',
    'admin.tabs.photos': 'Photos',
    'admin.tabs.history': 'History',
    'admin.tabs.logs': 'Logs',
    'admin.tabs.donations': 'Donations',
    'admin.events.manage': 'Manage Events',
    'admin.events.add': 'Add Event',
    'admin.events.titleEn': 'Title (EN)',
    'admin.events.titleFr': 'Title (FR)',
    'admin.events.date': 'Date',
    'admin.events.locationEn': 'Location (EN)',
    'admin.events.locationFr': 'Location (FR)',
    'admin.events.descEn': 'Description (EN)',
    'admin.events.descFr': 'Description (FR)',
    'admin.events.save': 'Save Event',
    'admin.events.placeholderTitleEn': 'Event title in English',
    'admin.events.placeholderTitleFr': 'Event title in French',
    'admin.events.placeholderLocationEn': 'Location in English',
    'admin.events.placeholderDescEn': 'Detailed description in English',
    'admin.events.placeholderDescFr': 'Detailed description in French',
    'admin.videos.manage': 'Manage Videos',
    'admin.videos.add': 'Add Video',
    'admin.videos.titleEn': 'Title (EN)',
    'admin.videos.url': 'Video URL (YouTube/Vimeo)',
    'admin.videos.thumbnail': 'Thumbnail URL',
    'admin.videos.category': 'Category',
    'admin.videos.save': 'Save Video',
    'admin.photos.manage': 'Manage Photos',
    'admin.photos.add': 'Add Photo',
    'admin.photos.file': 'Photo File',
    'admin.photos.captionEn': 'Caption (EN)',
    'admin.photos.captionFr': 'Caption (FR)',
    'admin.photos.upload': 'Upload Photo',
    'admin.photos.uploading': 'Uploading...',
    'admin.photos.clickUpload': 'Click to upload photo',
    'admin.photos.fileHint': 'JPG, PNG, GIF up to 10MB',
    'admin.photos.empty': 'No photos yet. Add your first photo!',
    'admin.partners.manage': 'Manage Partners',
    'admin.partners.add': 'Add Partner',
    'admin.partners.name': 'Partner Name',
    'admin.partners.website': 'Website URL',
    'admin.partners.logo': 'Logo URL',
    'admin.partners.type': 'Type',
    'admin.partners.save': 'Save Partner',
    'admin.history.title': 'Update History',
    'admin.history.date': 'Date',
    'admin.history.admin': 'Admin',
    'admin.history.action': 'Action',
    'admin.history.details': 'Details',
    'admin.history.empty': 'No history records found.',
    'admin.logs.title': 'System Logs',
    'admin.logs.date': 'Date',
    'admin.logs.level': 'Level',
    'admin.logs.message': 'Message',
    'admin.logs.empty': 'No system logs found.',
    'admin.donations.title': 'Donation Receipts',
    'admin.donations.totalReceived': 'Total Received',
    'admin.donations.date': 'Date',
    'admin.donations.donor': 'Donor',
    'admin.donations.amount': 'Amount',
    'admin.donations.status': 'Status',
    'admin.donations.anonymous': 'Anonymous',
    'admin.donations.empty': 'No donation records yet.',
    'admin.tabs.news': 'News',
        'admin.tabs.projects': 'Projects',
        'admin.projects.manage': 'Manage Projects',
        'admin.projects.add': 'Add Project',
        'admin.projects.edit': 'Edit Project',
        'admin.projects.titleEn': 'Title (EN)',
        'admin.projects.titleFr': 'Title (FR)',
        'admin.projects.descEn': 'Description (EN)',
        'admin.projects.descFr': 'Description (FR)',
        'admin.projects.imageUrl': 'Image URL',
        'admin.projects.categoryEn': 'Category (EN)',
        'admin.projects.categoryFr': 'Category (FR)',
        'admin.projects.save': 'Save Project',
        'admin.projects.deleteConfirm': 'Are you sure you want to delete this project?',
        'admin.projects.empty': 'No projects yet. Add your first project!',
        'admin.news.manage': 'Manage News Articles',
      'admin.news.add': 'Add Article',
      'admin.news.edit': 'Edit Article',
      'admin.news.titleEn': 'Title (EN)',
      'admin.news.titleFr': 'Title (FR)',
      'admin.news.contentEn': 'Content (EN)',
      'admin.news.contentFr': 'Content (FR)',
      'admin.news.imageUrl': 'Image URL',
      'admin.news.save': 'Save Article',
      'admin.news.deleteConfirm': 'Are you sure you want to delete this article?',
      'admin.news.empty': 'No news articles yet. Add your first article!',
      'admin.news.placeholderTitleEn': 'Article title in English',
      'admin.news.placeholderTitleFr': 'Article title in French',
      'admin.news.placeholderContentEn': 'Article content in English',
      'admin.news.placeholderContentFr': 'Article content in French',
      'admin.news.placeholderImageUrl': 'https://images.unsplash.com/...',
      'admin.refresh': 'Refresh',
      'admin.cancel': 'Cancel',
      'admin.confirm': 'Are you sure?',
      'admin.saving': 'Saving...',
    'login.title': 'Salamandra Admin',
    'login.subtitle': 'Sign in to manage the website',
    'login.username': 'Username',
    'login.password': 'Password',
    'login.usernamePlaceholder': 'Enter username',
    'login.passwordPlaceholder': 'Enter password',
    'login.submit': 'Sign In',
    'login.signing': 'Signing in...',
    'login.error': 'Invalid username or password',
    'login.errorGeneric': 'An error occurred. Please try again.',
    'login.portal': 'Salamandra Nature - Admin Portal',
      'donate.thanks': 'Thank You!',
      'donate.thanksDesc': 'Your generous donation of {amount} will help protect Madagascar\'s endangered turtles. Every contribution makes a difference in our conservation efforts.',
      'donate.emailSent': 'A confirmation email has been sent to {email}.',
      'donate.returnHome': 'Return Home',
      'donate.backHome': 'Back to Home',
      'donate.title': 'Support Turtle Conservation',
      'donate.subtitle': 'Your donation directly supports our mission to protect Madagascar\'s endangered turtle species and their habitats.',
      'donate.impactTitle': 'Your Impact',
      'donate.impact1': 'Provides food for rescued turtles for one week',
      'donate.impact2': 'Supports nest protection for one nesting season',
      'donate.impact3': 'Funds community education workshops',
      'donate.impact4': 'Sponsors habitat restoration for one hectare',
      'donate.secureTitle': '100% Secure Donation',
      'donate.secureDesc': 'Your payment information is encrypted and secure. Pay directly with your credit or debit card - no PayPal account required. Funds go directly to our association\'s PayPal account.',
      'donate.makeDonation': 'Make a Donation',
      'donate.selectAmount': 'Select Amount',
      'donate.customAmountLabel': 'Or enter custom amount',
      'donate.customAmountPlaceholder': 'Custom amount',
      'donate.fullName': 'Full Name',
      'donate.emailAddress': 'Email Address',
      'donate.donationAmount': 'Donation amount:',
      'donate.continue': 'Continue to Payment',
      'donate.details': 'Donation Details',
      'donate.edit': 'Edit'
    },
    fr: {
      'nav.home': 'Accueil',
      'nav.about': 'À Propos',
      'nav.projects': 'Projets',
      'nav.news': 'Actualités',
      'nav.media': 'Médias',
      'nav.events': 'Événements',
      'nav.partners': 'Partenaires',
        'nav.contact': 'Contact',
        'nav.admin': 'Admin',
        'nav.donate': 'Faire un Don',
      'hero.title': 'Protéger les',
      'hero.titleAccent': 'Tortues Terrestres de Madagascar',
      'hero.subtitle': 'Rejoignez-nous dans notre mission de conservation des espèces de tortues terrestres menacées et de préservation de leurs habitats de forêt sèche dans le sud de Madagascar.',
      'hero.cta': 'Soutenir notre Cause',
      'hero.learnMore': 'En savoir plus',
      'impact.title': 'Notre Impact',
      'impact.years': 'Années de Conservation',
      'impact.turtles': 'Tortues Protégées',
      'impact.communities': 'Communautés Locales',
      'impact.hectares': 'Hectares Protégés',
      'programs.title': 'Nos Programmes',
      'programs.habitat.title': 'Protection de l\'Habitat',
      'programs.habitat.desc': 'Préservation des forêts sèches et des broussailles critiques essentielles à la survie des tortues terrestres dans le sud de Madagascar.',
      'programs.edu.title': 'Éducation Communautaire',
      'programs.edu.desc': 'Impliquer les communautés locales par des programmes de sensibilisation et des alternatives de subsistance durables.',
      'programs.research.title': 'Recherche & Suivi',
      'programs.research.desc': 'Mener des recherches scientifiques pour mieux comprendre et protéger les populations de tortues terrestres menacées.',
      'cta.title': 'Chaque Don Fait la Différence',
      'cta.desc': 'Votre soutien nous aide à protéger les tortues terrestres menacées, préserver leurs habitats et éduquer les communautés.',
      'cta.button': 'Faire un Don Aujourd\'hui',
        'footer.desc': 'Salamandra Nature - Dévouée à la protection des tortues terrestres menacées de Madagascar depuis 2004.',
      'footer.links': 'Liens Rapides',
      'footer.contact': 'Contact',
        'footer.follow': 'Suivez-nous',
        'contact.title': 'Contactez-nous',
        'contact.subtitle': 'Vous avez des questions ou souhaitez devenir bénévole ? Envoyez-nous un message.',
        'contact.name': 'Nom complet',
        'contact.email': 'Adresse e-mail',
        'contact.subject': 'Sujet',
        'contact.message': 'Message',
        'contact.send': 'Envoyer le message',
        'contact.sending': 'Envoi en cours...',
        'contact.success': 'Message envoyé avec succès !',
        'contact.error': 'Échec de l\'envoi du message. Veuillez réessayer.',
        'contact.send_another': 'Envoyer un autre message',
        'contact.address_label': 'Adresse',
        'contact.email_label': 'Email',
        'contact.phone_label': 'Téléphone',
        'about.title': 'À Propos',
      'about.presentation': 'Présentation Générale',
      'about.actions': 'Nos Actions',
      'news.title': 'Dernières Actualités',
      'news.readMore': 'Lire la suite',
      'news.noNews': 'Pas encore d\'actualités. Revenez bientôt !',
      'projects.title': 'Nos Projets de Conservation',
      'media.title': 'Galerie Photo & Vidéo',
      'events.title': 'Calendrier des Événements',
      'events.search': 'Rechercher des Événements',
      'partners.title': 'Nos Partenaires',
      'admin.dashboard': 'Tableau de Bord Admin',
    'admin.members': 'Membres',
    'admin.members.manage': 'Gérer les Membres du Groupe',
    'admin.members.add': 'Ajouter un Membre',
    'admin.members.edit': 'Modifier le Membre',
    'admin.members.name': 'Nom Complet',
    'admin.members.roleEn': 'Rôle (EN)',
    'admin.members.roleFr': 'Rôle (FR)',
    'admin.members.bioEn': 'Courte Bio (EN)',
    'admin.members.bioFr': 'Courte Bio (FR)',
    'admin.members.photo': 'Photo',
    'admin.members.order': 'Ordre d\'affichage',
    'admin.members.save': 'Enregistrer le Membre',
    'admin.members.cancel': 'Annuler',
    'admin.members.delete': 'Supprimer',
    'admin.members.deleteConfirm': 'Êtes-vous sûr de vouloir supprimer ce membre ?',
    'admin.members.empty': 'Aucun membre du groupe pour l\'instant. Ajoutez votre premier membre !',
      'admin.members.uploadPhoto': 'Cliquez pour télécharger une photo',
    'admin.members.photoUrl': 'URL de la photo',
    'admin.members.photoUrlHint': 'Collez une URL au lieu de télécharger. Le téléchargement a la priorité si les deux sont fournis.',
    'admin.subtitle': 'Gérer le contenu du site de l\'ONG',
    'admin.totalVisitors': 'Visiteurs totaux',
    'admin.logout': 'Déconnexion',
    'admin.goToWebsite': 'Aller au site',
    'admin.tabs.events': 'Événements',
    'admin.tabs.videos': 'Vidéos',
    'admin.tabs.photos': 'Photos',
    'admin.tabs.history': 'Historique',
    'admin.tabs.logs': 'Journaux',
    'admin.tabs.donations': 'Dons',
    'admin.events.manage': 'Gérer les Événements',
    'admin.events.add': 'Ajouter un Événement',
    'admin.events.titleEn': 'Titre (EN)',
    'admin.events.titleFr': 'Titre (FR)',
    'admin.events.date': 'Date',
    'admin.events.locationEn': 'Lieu (EN)',
    'admin.events.locationFr': 'Lieu (FR)',
    'admin.events.descEn': 'Description (EN)',
    'admin.events.descFr': 'Description (FR)',
    'admin.events.save': 'Enregistrer l\'événement',
    'admin.events.placeholderTitleEn': 'Titre de l\'événement en anglais',
    'admin.events.placeholderTitleFr': 'Titre de l\'événement en français',
    'admin.events.placeholderLocationEn': 'Lieu en anglais',
    'admin.events.placeholderDescEn': 'Description détaillée en anglais',
    'admin.events.placeholderDescFr': 'Description détaillée en français',
    'admin.videos.manage': 'Gérer les Vidéos',
    'admin.videos.add': 'Ajouter une Vidéo',
    'admin.videos.titleEn': 'Titre (EN)',
    'admin.videos.url': 'URL Vidéo (YouTube/Vimeo)',
    'admin.videos.thumbnail': 'URL Miniature',
    'admin.videos.category': 'Catégorie',
    'admin.videos.save': 'Enregistrer la Vidéo',
    'admin.photos.manage': 'Gérer les Photos',
    'admin.photos.add': 'Ajouter une Photo',
    'admin.photos.file': 'Fichier Photo',
    'admin.photos.captionEn': 'Légende (EN)',
    'admin.photos.captionFr': 'Légende (FR)',
    'admin.photos.upload': 'Télécharger la Photo',
    'admin.photos.uploading': 'Téléchargement...',
    'admin.photos.clickUpload': 'Cliquez pour télécharger une photo',
    'admin.photos.fileHint': 'JPG, PNG, GIF jusqu\'à 10 Mo',
    'admin.photos.empty': 'Pas encore de photos. Ajoutez votre première photo !',
    'admin.partners.manage': 'Gérer les Partenaires',
    'admin.partners.add': 'Ajouter un Partenaire',
    'admin.partners.name': 'Nom du Partenaire',
    'admin.partners.website': 'URL du site web',
    'admin.partners.logo': 'URL du logo',
    'admin.partners.type': 'Type',
    'admin.partners.save': 'Enregistrer le Partenaire',
    'admin.history.title': 'Historique des Mises à Jour',
    'admin.history.date': 'Date',
    'admin.history.admin': 'Admin',
    'admin.history.action': 'Action',
    'admin.history.details': 'Détails',
    'admin.history.empty': 'Aucun historique trouvé.',
    'admin.logs.title': 'Journaux Système',
    'admin.logs.date': 'Date',
    'admin.logs.level': 'Niveau',
    'admin.logs.message': 'Message',
    'admin.logs.empty': 'Aucun journal système trouvé.',
    'admin.donations.title': 'Reçus de Dons',
    'admin.donations.totalReceived': 'Total Reçu',
    'admin.donations.date': 'Date',
    'admin.donations.donor': 'Donateur',
    'admin.donations.amount': 'Montant',
    'admin.donations.status': 'Statut',
    'admin.donations.anonymous': 'Anonyme',
    'admin.donations.empty': 'Aucun don enregistré pour l\'instant.',
    'admin.tabs.news': 'Actualités',
        'admin.tabs.projects': 'Projets',
        'admin.projects.manage': 'Gérer les Projets',
        'admin.projects.add': 'Ajouter un Projet',
        'admin.projects.edit': 'Modifier le Projet',
        'admin.projects.titleEn': 'Titre (EN)',
        'admin.projects.titleFr': 'Titre (FR)',
        'admin.projects.descEn': 'Description (EN)',
        'admin.projects.descFr': 'Description (FR)',
        'admin.projects.imageUrl': 'URL de l\'image',
        'admin.projects.categoryEn': 'Catégorie (EN)',
        'admin.projects.categoryFr': 'Catégorie (FR)',
        'admin.projects.save': 'Enregistrer le Projet',
        'admin.projects.deleteConfirm': 'Êtes-vous sûr de vouloir supprimer ce projet ?',
        'admin.projects.empty': 'Aucun projet pour l\'instant. Ajoutez votre premier projet !',
        'admin.news.manage': 'Gérer les Actualités',
      'admin.news.add': 'Ajouter un Article',
      'admin.news.edit': 'Modifier l\'Article',
      'admin.news.titleEn': 'Titre (EN)',
      'admin.news.titleFr': 'Titre (FR)',
      'admin.news.contentEn': 'Contenu (EN)',
      'admin.news.contentFr': 'Contenu (FR)',
      'admin.news.imageUrl': 'URL de l\'image',
      'admin.news.save': 'Enregistrer l\'Article',
      'admin.news.deleteConfirm': 'Êtes-vous sûr de vouloir supprimer cet article ?',
      'admin.news.empty': 'Aucun article pour l\'instant. Ajoutez votre premier article !',
      'admin.news.placeholderTitleEn': 'Titre de l\'article en anglais',
      'admin.news.placeholderTitleFr': 'Titre de l\'article en français',
      'admin.news.placeholderContentEn': 'Contenu de l\'article en anglais',
      'admin.news.placeholderContentFr': 'Contenu de l\'article en français',
      'admin.news.placeholderImageUrl': 'https://images.unsplash.com/...',
      'admin.refresh': 'Actualiser',
      'admin.cancel': 'Annuler',
      'admin.confirm': 'Êtes-vous sûr ?',
      'admin.saving': 'Enregistrement...',
    'login.title': 'Salamandra Admin',
    'login.subtitle': 'Connectez-vous pour gérer le site',
    'login.username': 'Nom d\'utilisateur',
    'login.password': 'Mot de passe',
    'login.usernamePlaceholder': 'Entrez votre nom d\'utilisateur',
    'login.passwordPlaceholder': 'Entrez votre mot de passe',
    'login.submit': 'Se connecter',
    'login.signing': 'Connexion en cours...',
    'login.error': 'Nom d\'utilisateur ou mot de passe incorrect',
    'login.errorGeneric': 'Une erreur est survenue. Veuillez réessayer.',
    'login.portal': 'Salamandra Nature - Portail Admin',
      'donate.thanks': 'Merci !',
      'donate.thanksDesc': 'Votre don généreux de {amount} aidera à protéger les tortues menacées de Madagascar. Chaque contribution fait une différence dans nos efforts de conservation.',
      'donate.emailSent': 'Un e-mail de confirmation a été envoyé à {email}.',
      'donate.returnHome': 'Retour à l\'accueil',
      'donate.backHome': 'Retour à l\'accueil',
      'donate.title': 'Soutenir la Conservation des Tortues',
      'donate.subtitle': 'Votre don soutient directement notre mission de protection des espèces de tortues menacées de Madagascar et de leurs habitats.',
      'donate.impactTitle': 'Votre Impact',
      'donate.impact1': 'Fournit de la nourriture aux tortues sauvées pendant une semaine',
      'donate.impact2': 'Soutient la protection des nids pour une saison de nidification',
      'donate.impact3': 'Finance des ateliers d\'éducation communautaire',
      'donate.impact4': 'Parraine la restauration de l\'habitat pour un hectare',
      'donate.secureTitle': 'Don 100% Sécurisé',
      'donate.secureDesc': 'Vos informations de paiement sont cryptées et sécurisées. Payez directement avec votre carte de crédit ou de débit - aucun compte PayPal n\'est requis. Les fonds vont directement sur le compte PayPal de notre association.',
      'donate.makeDonation': 'Faire un Don',
      'donate.selectAmount': 'Sélectionnez le montant',
      'donate.customAmountLabel': 'Ou entrez un montant personnalisé',
      'donate.customAmountPlaceholder': 'Montant personnalisé',
      'donate.fullName': 'Nom complet',
      'donate.emailAddress': 'Adresse e-mail',
      'donate.donationAmount': 'Montant du don :',
      'donate.continue': 'Continuer vers le paiement',
      'donate.details': 'Détails du don',
      'donate.edit': 'Modifier'
    }
};

const I18nContext = createContext<I18nContextType | undefined>(undefined);

export function I18nProvider({ children }: { children: React.ReactNode }) {
  const [language, setLanguage] = useState<Language>('en');
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    const savedLang = localStorage.getItem('language') as Language;
    if (savedLang && (savedLang === 'en' || savedLang === 'fr')) {
      setLanguage(savedLang);
    }
    setMounted(true);
  }, []);

  const handleSetLanguage = (lang: Language) => {
    setLanguage(lang);
    localStorage.setItem('language', lang);
  };

  const t = (key: string) => {
    const lang = mounted ? language : 'en';
    return translations[lang][key] || key;
  };

  return (
    <I18nContext.Provider value={{ language, setLanguage: handleSetLanguage, t }}>
      {children}
    </I18nContext.Provider>
  );
}

export function useI18n() {
  const context = useContext(I18nContext);
  if (context === undefined) {
    throw new Error('useI18n must be used within an I18nProvider');
  }
  return context;
}
